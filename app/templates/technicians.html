{% extends "layout.html" %}

{% block title %}Technicians{% endblock %}

{% block extra_css %}
<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Page-specific CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/technicians.css') }}">
{% endblock %}

{% block content %}
<h2>Technician List</h2>

<!-- Admin-only action: add new technician -->
{% if current_user.role == 'admin' %}
<div class="action-bar">
  <a href="{{ url_for('main.add_technician') }}" class="btn-add" aria-label="Add new technician">
    <i class="fas fa-user-plus"></i> Add New Technician
  </a>
</div>
{% endif %}

<!-- Technician list -->
<ul class="technician-list">
  {% for tech in technicians %}
  <li class="technician-item">
    <!-- Technician info -->
    <div class="technician-info">
      <strong>{{ tech.name }}</strong><br>
      <small>{{ tech.email }} | {{ tech.phone }} | {{ tech.specialization }}</small>
    </div>

    <!-- Admin-only actions -->
    {% if current_user.role == 'admin' %}
    <div class="technician-actions">
      <!-- Edit button -->
      <a href="{{ url_for('main.edit_technician', id=tech.id) }}" class="edit-button" aria-label="Edit {{ tech.name }}">
        <i class="fas fa-edit"></i> Edit
      </a>

      <!-- Delete form -->
      <form action="{{ url_for('main.delete_technician', id=tech.id) }}" method="POST" class="delete-form">
        <button type="submit" class="delete-button" 
                onclick="return confirm('Are you sure you want to delete {{ tech.name }}?')" 
                aria-label="Delete {{ tech.name }}">
          <i class="fas fa-trash"></i> Delete
        </button>
      </form>
    </div>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endblock %}
