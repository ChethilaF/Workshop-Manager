{% extends "layout.html" %}

{% block title %}Jobs for {{ technician.name }}{% endblock %}

{% block content %}
<!-- Page heading showing which technician's jobs are displayed -->
<h2>Jobs Assigned to {{ technician.name }}</h2>

<!-- Check if the technician has any jobs -->
{% if jobs %}
<ul>
    {% for job in jobs %}
    <!-- Simple list display of job information -->
    <li>
        <strong>{{ job.description }}</strong><br>
        Status: {{ job.status }}<br>
        Start: {{ job.start_date }} |
        End: {{ job.end_date }} |
        Cost: ${{ job.total_cost }}<br>
        Customer: {{ job.customer.name }}
    </li>

    <!-- Card-style detailed display for each job -->
    <div class="job-card">
        <h3>{{ job.description }}</h3>
        <p>Status: {{ job.status }}</p>

        <!-- Conditional action buttons -->
        {% if not job.accepted %}
        <!-- Form to accept the job if it hasnâ€™t been accepted yet -->
        <form action="{{ url_for('main.accept_job', job_id=job.id) }}" method="POST">
            <button type="submit">Accept Job</button>
        </form>
        {% else %}
        <!-- Button to go to Job Control if job is already accepted -->
        <a href="{{ url_for('main.job_control', job_id=job.id) }}">
            <button>Go to Job Control</button>
        </a>
        {% endif %}
    </div>
    {% endfor %}
</ul>
{% else %}
<!-- Message when no jobs are assigned to this technician -->
<p>No jobs assigned yet.</p>
{% endif %}
{% endblock %}
