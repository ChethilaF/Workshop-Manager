{% extends "layout.html" %}
{% set hide_navbar = True %}
{% block title %}Workshop Manager | Register{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}">
{% endblock %}

{% block content %}
<div class="register-page">
  <div class="form-side">
    <div class="logo-box">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Mozita Logo">
    </div>
    <div class="register-box">
      <h2>Create Your Account</h2>
      <form method="POST">
        <div class="input-group">
          <i class="fas fa-user"></i>
          <input type="text" name="username" placeholder="Username" required pattern="^[a-zA-Z0-9_.-]{3,}$" title="Username must be at least 3 characters and contain only letters, numbers, underscores, dots, or hyphens.">
        </div>
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" name="password" placeholder="Create Password" required minlength="6">
        </div>
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" name="confirm_password" placeholder="Confirm Password" required minlength="6">
        </div>

        <label for="role">Select Role</label>
        <select name="role" required>
          <option value="" disabled selected>Select a role</option>
          <option value="technician">Technician</option>
          <option value="finance">Finance</option>
          <option value="manager">Manager</option>
        </select>

        <div class="input-group">
          <i class="fas fa-id-card"></i>
          <input type="text" name="name" placeholder="Full Name" required>
        </div>
        <div class="input-group">
          <i class="fas fa-phone"></i>
          <input type="text" name="phone" placeholder="Phone" pattern="^[0-9\-\+]{7,15}$" title="Please enter a valid phone number">
        </div>
        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" name="email" placeholder="Email (optional)">
        </div>

        <button type="submit" class="btn-register">Register</button>
      </form>
      <div class="login-link">
        Already have an account? <a href="{{ url_for('main.home') }}">Back to Login</a>
      </div>
    </div>
  </div>

  <div class="image-side">
    <div class="carousel">
      <img src="{{ url_for('static', filename='1.jpg') }}" class="carousel-img active">
      <img src="{{ url_for('static', filename='2.jpg') }}" class="carousel-img">
      <img src="{{ url_for('static', filename='3.jpg') }}" class="carousel-img">
    </div>
  </div>
</div>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.carousel-img');

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === index);
    });
  }

  setInterval(() => {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  }, 4000);
</script>
{% endblock %}
